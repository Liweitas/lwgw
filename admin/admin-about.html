<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>管理关于我们</title>\n    <link rel=\"stylesheet\" href=\"admin-styles.css\">\n    <style>\n        /* Form specific styles */\n        #about-form label {\n            display: block;\n            margin-bottom: 5px;\n            font-weight: bold;\n            color: #333;\n            margin-top: 15px; /* Space between fields */\n        }\n        #about-form textarea,\n        #about-form input[type=\"text\"] {\n            width: 100%;\n            padding: 10px;\n            margin-bottom: 5px;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n            box-sizing: border-box; \n            font-size: 1em;\n        }\n        #about-form textarea {\n            min-height: 100px;\n            resize: vertical;\n        }\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 15px;\n        }\n        .form-actions {\n             margin-top: 30px;\n             text-align: center;\n        }\n        .form-actions button {\n            padding: 12px 25px;\n            background-color: #2ecc71;\n            color: white;\n            border: none;\n            border-radius: 5px;\n            cursor: pointer;\n            font-size: 1.1em;\n            transition: background-color 0.3s ease;\n        }\n        .form-actions button:hover {\n             background-color: #27ae60;\n        }\n        #update-status {\n            margin-top: 15px;\n            font-weight: bold;\n            text-align: center;\n        }\n         #update-status:empty {\n            display: none;\n        }\n    </style>\n</head>\n<body>\n    <!-- Admin Navigation -->\n    <nav class=\"admin-sub-nav\">\n        <a href=\"/admin\">管理中心</a> |\n        <a href=\"/admin/carousel\">管理轮播图片</a> |\n        <a href=\"/admin/services\">管理服务项目</a>\n        <span style=\"float: right;\"><a href=\"/admin/logout\" style=\"color: #f1c40f;\">登出</a></span>\n    </nav>\n\n    <div class=\"container\">\n        <h1>管理"关于我们"页面内容</h1>\n\n        <form id=\"about-form\">\n            <div>\n                <label for=\"paragraph1\">段落 1:</label>\n                <textarea id=\"paragraph1\" name=\"paragraph1\" required></textarea>\n            </div>\n            <div>\n                <label for=\"paragraph2\">段落 2:</label>\n                <textarea id=\"paragraph2\" name=\"paragraph2\" required></textarea>\n            </div>\n\n            <h2>统计数据</h2>\n            <div class=\"stats-grid\">\n                <div>\n                    <label for=\"stat_years\">年行业经验:</label>\n                    <input type=\"text\" id=\"stat_years\" name=\"stat_years\" required>\n                </div>\n                <div>\n                    <label for=\"stat_projects\">成功项目:</label>\n                    <input type=\"text\" id=\"stat_projects\" name=\"stat_projects\" required>\n                </div>\n                <div>\n                    <label for=\"stat_team\">专业团队:</label>\n                    <input type=\"text\" id=\"stat_team\" name=\"stat_team\" required>\n                </div>\n            </div>\n\n            <div class=\"form-actions\">\n                <button type=\"submit\">保存更改</button>\n            </div>\n            <div id=\"update-status\"></div>\n        </form>\n    </div>\n\n    <script>\n        const form = document.getElementById(\'about-form\');\n        const statusDiv = document.getElementById(\'update-status\');\n\n        // Fetch current content and populate form on load\n        async function loadAboutContent() {\n            statusDiv.textContent = \'加载内容中...\';\n            try {\n                const response = await fetch(\'/api/about\');\n                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n                const data = await response.json();\n\n                form.elements[\'paragraph1\'].value = data.paragraph1 || \'\';\n                form.elements[\'paragraph2\'].value = data.paragraph2 || \'\';\n                form.elements[\'stat_years\'].value = data.stat_years || \'\';\n                form.elements[\'stat_projects\'].value = data.stat_projects || \'\';\n                form.elements[\'stat_team\'].value = data.stat_team || \'\';\n                statusDiv.textContent = \'\'; // Clear loading message\n\n            } catch (error) {\n                console.error(\'Failed to load about content:\', error);\n                statusDiv.textContent = \'加载内容失败。\';\n                statusDiv.style.color = \'red\';\n            }\n        }\n\n        // Handle form submission to update content\n        form.addEventListener(\'submit\', async (event) => {\n            event.preventDefault();\n            statusDiv.textContent = \'保存中...\';\n            statusDiv.style.color = \'inherit\';\n\n            const formData = {\n                paragraph1: form.elements[\'paragraph1\'].value,\n                paragraph2: form.elements[\'paragraph2\'].value,\n                stat_years: form.elements[\'stat_years\'].value,\n                stat_projects: form.elements[\'stat_projects\'].value,\n                stat_team: form.elements[\'stat_team\'].value\n            };\n\n            try {\n                const response = await fetch(\'/api/about\', {\n                    method: \'PUT\',\n                    headers: {\n                        \'Content-Type\': \'application/json\',\n                    },\n                    body: JSON.stringify(formData)\n                });\n\n                 if (!response.ok) {\n                    const errorData = await response.json();\n                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\n                }\n                \n                statusDiv.textContent = \'保存成功!\';\n                statusDiv.style.color = \'green\';\n                // Optionally reload data to confirm, though response should be the updated data\n                // const updatedData = await response.json(); \n                // console.log(\'Updated data:\', updatedData);\n\n            } catch (error) {\n                console.error(\'Failed to update about content:\', error);\n                statusDiv.textContent = `保存失败: ${error.message}`;\n                statusDiv.style.color = \'red\';\n            }\n        });\n\n        // Initial load\n        loadAboutContent();\n    </script>\n</body>\n</html> 